# 多媒体技术

在网页设计中，多媒体技术主要是指在网页上运用音频视频传递信息的一种方式。在网络传输速度越来越快的今天，音频和视频技术已经被越来越广泛的应用在网页设计中



## HTML5 多媒体的特性

在HTML5出现之前并没有将视频和音频嵌入到页面的标准方式，多媒体内容在大多数情况下都是通过第三方插件或集成在Web浏览器的应用程序置于页面中。

HTML5中新增的video标签和audio标签可以避免这样的问题





## 视频和音频编码解码器

由于视频和音频的原始数据一般都比较大，如果不对其进行编码就放到互联网上，传播时会消耗大量时间，无法实现流畅的传输或播放

通过视频和音频编解码器对视频和音频文件进行压缩，就可以实现视频和音的正常传输和播放。



**视频编解码器**

视频编解码器定义了多媒体数据流编码和解码的算法。其中编码器主要是对数据流进行编码操作，用于存储和传输。

**H.264**

H.264是国际标准化组织（ISO）和国际电信联盟（ITU）共同提出的继MPEG4之后的新一代数字视频压缩格式

**Theora**

Theora是免费开放的视频压缩编码技术，可以支持从VP3 HD高清到MPEG-4/DiVX视频格式

**VP8**

VP8是第八代的On2视频，能以更少的数据提供更高质量的视频，而且只需较小的处理能力即可播放视频



**音频编解码器**

音频编解码器定义了音频数据流编码和解码的算法。与视频编解码器的工作原理一样，音频编码器主要用于对数据流进行编码操作，解码器主要用于对音频文件进行解码

**ACC**

ACC是高级音频编码（英文：Advanced Audio Coding）的简称，该音频编码是基于MPEG-2的音频编码技术，目的是取代MP3格式

**MP3**

MP3是“MPEG-1音频层3”的简称。它被设计用来大幅度地降低音频数据量

**Ogg**

Ogg全称为Ogg Vorbis，是一种新的音频压缩格式，类似于MP3等现有的音乐格式。OGG Vorbis有一个很出众的特点，就是支持多声道





## 多媒体的格式

运用HTML5的video和audio标签可以在页面中嵌入视频或音频文件，如果想要这些文件在页面中加载播放，还需要设置正确的多媒体格式





## 支持视频和音频的浏览器



## 在HTML5 中嵌入视频

**在****HTML5****中，****video****标签用于定义播放视频文件的标准。**

```html
<video src="视频文件路径" controls="controls"></video>
```

**常用属性值**

| **属性**     | **值**   | **描述**                                                     |
| ------------ | -------- | ------------------------------------------------------------ |
| **autoplay** | autoplay | 当页面载入完成后自动播放视频。                               |
| **loop**     | loop     | 视频结束时重新开始播放。                                     |
| **preload**  | preload  | 如果出现该属性，则视频在页面加载时进行加载，并预备播放。如果使用 "autoplay"，则忽略该属性。 |
| **poster**   | url      | 当视频缓冲不足时，该属性值链接一个图像，并将该图像按照一定的比例显示出来。 |







## 在HTML5 中嵌入音频

**在****HTML5****中，****audio****标签用于定义播放音频文件的标准**

```html
<audio src="音频文件路径" controls="controls"></audio>

```

**常用属性值**

| **属性**     | **值**   | **描述**                                                     |
| ------------ | -------- | ------------------------------------------------------------ |
| **autoplay** | autoplay | 当页面载入完成后自动播放音频。                               |
| **loop**     | loop     | 音频结束时重新开始播放。                                     |
| **preload**  | preload  | 如果出现该属性，则音频在页面加载时进行加载，并预备播放。如果使用 "autoplay"，则忽略该属性。 |







## 音视频中的source 元素

虽然html5支持Ogg、MPEG 4和WebM的视频格式以及Vorbis、MP3和Wav的音频格式，但各浏览器对这些格式却不完全支持



| **视频格式** |      |              |             |             |             |
| ------------ | ---- | ------------ | ----------- | ----------- | ----------- |
|              |      | Firefox  4.0 | Opera  10.6 | Chrome  6.0 | Safari  3.0 |
|              |      | 支持         | 支持        | 支持        |             |
|              |      |              |             | 支持        | 支持        |
|              |      | 支持         | 支持        | 支持        |             |
| **音频格式** |      |              |             |             |             |
|              |      | 支持         | 支持        | 支持        |             |
|              |      |              |             | 支持        | 支持        |
|              |      | 支持         | 支持        |             | 支持        |

在HTML5中，运用source元素可以为video元素或audio元素提供多个备用文件。

```html
<audio controls="controls">
	<source src="音频文件地址" type="媒体文件类型/格式">
	<source src="音频文件地址" type="媒体文件类型/格式">
	……
</audio>

```







## 调用网页多媒体文件

在网页中调用多媒体文件的方法主要有两种：

•调用本地多媒体文件

•调用指定url地址的互联网多媒体文件







## CSS 控制视频的宽高

在HTML5中，经常会通过为video元素添加宽高的方式给视频预留一定的空间，这样浏览器在加载页面时就会预先确定视频的尺寸，为其保留合适的空间，使页面的布局不产生变化





## 视频和音频的方法和事件

| **方法**          | **描述**                                                     |
| ----------------- | ------------------------------------------------------------ |
| **load()**        | 加载媒体文件，为播放做准备。通常用于播放前的预加载，也会用于重新加载媒体文件。 |
| **play()**        | 播放媒体文件。如果视频没有加载，则加载并播放；如果视频是暂停的，则变为播放。 |
| **pause()**       | 暂停播放媒体文件。                                           |
| **canPlayType()** | 测试浏览器是否支持指定的媒体类型。                           |



| **事件**           | **描述**                                                   |
| ------------------ | ---------------------------------------------------------- |
| **play**           | 当执行方法play()时触发。                                   |
| **playing**        | 正在播放时触发。                                           |
| **pause**          | 当执行了方法pause()时触发。                                |
| **timeupdate**     | 当播放位置被改变时触发。                                   |
| **ended**          | 当播放结束后停止播放时触发。                               |
| **waiting**        | 在等待加载下一帧时触发。                                   |
| **ratechange**     | 在当前播放速率改变时触发。                                 |
| **volumechange**   | 在音量改变时触发。                                         |
| **canplay**        | 以当前播放速率，需要缓冲时触发。                           |
| **canplaythrough** | 以当前播放速率，不需要缓冲时触发。                         |
| **durationchange** | 当播放时长改变时触发。                                     |
| **loadstart**      | 在浏览器开始在网上寻找数据时触发。                         |
| **progress**       | 当浏览器正在获取媒体文件时触发。                           |
| **suspend**        | 当浏览器暂停获取媒体文件，且文件获取并没有正常结束时触发。 |

| **abort**          | 当中止获取媒体数据时触发。但这种中止不是由错误引起的。 |
| ------------------ | ------------------------------------------------------ |
| **error**          | 当获取媒体过程中出错时触发。                           |
| **emptied**        | 当所在网络变为初始化状态时触发。                       |
| **stalled**        | 浏览器尝试获取媒体数据失败时触发。                     |
| **loadedmetadata** | 在加载完媒体元数据时触发。                             |
| **loadeddata**     | 在加载完当前位置的媒体播放数据时触发。                 |
| **seeking**        | 浏览器正在请求数据时触发。                             |
| **seeked**         | 浏览器停止请求数据时触发。                             |



## HTML5 音视频的发展趋势

**流式音频视频**

**跨资源的共享**

**字幕支持**

**编码解码的支持**







## 阶段案例



